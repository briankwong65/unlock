name: Fetch and Create Blog Posts
description: Fetches the latest blog posts from the Unlock Protocol blog and creates new posts in the website repository.

env:
  DOCKER_BUILDKIT: 1
  BUILDKIT_PROGRESS: plain

runs:
  using: 'composite'
  steps:
    - uses: actions/setup-node@v4
      with:
        node-version: 20

    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install dependencies
      run: yarn

    - name: Run RSS Feed Script
      run: node rss_feed.js

    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v6
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        commit-message: 'Add new blog posts'
        title: 'New blog posts from RSS feed'
        body: 'Automatically generated PR to add new blog posts fetched from the RSS feed.'
        branch: new-blog-posts
